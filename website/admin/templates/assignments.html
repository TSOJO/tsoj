{% extends "base.html" %}

{% block title %}Assignments{% endblock %}

{% block content %}
<div class="d-flex justify-content-between">
    <h1>Assignments</h1>
    <a href="{{url_for('admin_bp.create_assignment')}}" class="btn btn-success align-self-center">Create</a>
</div>
<table class="table table-striped table-bordered"
       class="table table-bordered"
       data-toggle="table"
       data-search="true"
       data-pagination="true"
       data-pagination-loop="false">
    <thead>
        <tr>
            <th scope="col">Set time</th>
            <th scope="col">Created by</th>
            <th scope="col">Problem IDs</th>
            <th scope="col">Set to</th>
        </tr>
    </thead>
    <tbody>
        {% for assignment in assignments %}
        <tr>
            <th scope="row"><a href="{{url_for('admin_bp.assignment_results', id=assignment.id)}}" class="text-decoration-none">{{assignment.set_time.strftime("%d/%m/%y")}}</a></th>
            <td>{{assignment.creator}}</td>
            <td>{{assignment.problem_ids|join(', ')}}</td>
            <td>{% for group_id in assignment.user_group_ids %}{{user_group_names[group_id]}}{% if not loop.last %}, {% endif %}{% endfor %}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
